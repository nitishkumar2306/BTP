sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/m/MessageToast"],(e,t,o,r,n,i,s)=>{"use strict";return e.extend("com.sap.salesinventorymanagementapp.controller.home",{onInit(){var e=this.getOwnerComponent().getModel("loggedInUserModel");var t=e.bindContext("/currentUser");t.requestObject().then(function(e){console.log("Logged-in user details:",e)}).catch(function(e){console.error("Error fetching user details:",e)})},onCloseProductDataTableDialog:function(){this.byId("productDataTableDialog").close()},onProductCardPress:async function(){console.log("Product Card Pressed")},onSearch:function(){var e=this.getView();var n=e.byId("searchField").getValue();var i=new t({path:"productName",operator:o.Contains,value1:n,caseSensitive:false});e.byId("idProductsTable").getBinding("items").filter(i,r.Application)},onPress:function(e){var t=n.getRouterFor(this);var o=e.getSource().getBindingContext().getValue().productId;t.navTo("detailRoute",{productId:o})},onProductCreate:function(){var e=new i({productId:globalThis.crypto.randomUUID(),supplierId:"",productName:"",quantityPerUnit:"",unitPrice:"",unitsInStock:"",unitsOnOrder:"",reorderLevel:"",discontinued:""});this.getView().setModel(e,"productCreateModel");if(!this.pDialog){this.pDialog=this.loadFragment({name:"com.sap.salesinventorymanagementapp.view.createNewProduct"})}this.pDialog.then(function(e){e.open()})},onCloseProductDialog:function(){this.byId("productCreateFragmentDialog").close()},onCreateProductDialog:function(){var e=this.byId("supplierCreateFragment").getSelectedKey();this.getView().getModel("productCreateModel").setProperty("/supplierId",e);this.getView().getModel("productCreateModel").setProperty("/discontinued",false);var t=this.getView();var o=t.getModel("i18n").getResourceBundle();var r=this.getView().getModel("productCreateModel").getData();r.unitPrice=parseFloat(r.unitPrice);r.unitsInStock=parseInt(r.unitsInStock,10);r.unitsOnOrder=parseInt(r.unitsOnOrder,10);r.reorderLevel=parseInt(r.reorderLevel,10);this.byId("idProductsTable").getBinding("items").create(this.getView().getModel("productCreateModel").getData()).created().then(function(){s.show(o.getText("productCreatedMessage"))});t.setBusy(true);function n(){t.setBusy(false)}t.getModel().submitBatch("updateGroup").then(n,n);this.byId("productCreateFragmentDialog").close()},onProductDelete:function(){var e=this.getView();var t=e.getModel("i18n").getResourceBundle();var o,r=this.byId("idProductsTable").getSelectedItem(),n;if(r){var o=r.getBindingContext();var e=this.getView();o.delete().then(function(){s.show(t.getText("deletSuccessMessage"))}.bind(this),function(e){MessageBox.error(t.getText("deleteErrorMessage")+", "+e.message)}.bind(this));e.setBusy(true);function i(){e.setBusy(false)}e.getModel().submitBatch("updateGroup").then(i,i)}}})});
//# sourceMappingURL=home.controller.js.map