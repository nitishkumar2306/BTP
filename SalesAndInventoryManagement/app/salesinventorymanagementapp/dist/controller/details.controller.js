sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/ui/core/routing/History","sap/ui/model/json/JSONModel","sap/m/MessageToast"],(e,t,r,o,s)=>{"use strict";return e.extend("com.sap.salesinventorymanagementapp.controller.details",{onInit(){var e=this.getOwnerComponent().getRouter();e.getRoute("detailRoute").attachPatternMatched(this._onObjectMatched,this);var t=new o({isProductsDataEditable:false});this.getView().setModel(t,"oProductEnableModel")},handleNavButton:function(){var e=r.getInstance();var o=e.getPreviousHash();if(o!=undefined){window.history.go(-1)}else{var s=t.getRouterFor(this);s.navTo("homeRoute",{},true)}},_onObjectMatched:function(e){this.getView().bindElement("/Products("+e.getParameter("arguments").productId+")")},onProductEdit:function(){var e=this.getView().getModel("oProductEnableModel");var t=e.getProperty("/isProductsDataEditable");e.setProperty("/isProductsDataEditable",!t)},onProductSave:function(){var e=this.getView();var t=e.getBindingContext();var r=e.getModel("i18n").getResourceBundle();var o=this.byId("productName").getValue().trim();var n=this.byId("quantityPerUnit").getValue().trim();var a=this.byId("unitPrice").getValue().trim();var i=this.byId("unitsInStock").getValue().trim();var u=this.byId("reorderLevel").getValue().trim();var d=this.byId("unitsOnOrder").getValue().trim();function c(e){return typeof e==="string"&&e.length>0}function g(e){return/^[0-9]+$/.test(e)&&parseInt(e)>=0}function l(e){return/^[0-9]+(\.[0-9]{1,2})?$/.test(e)&&parseFloat(e)>0}if(!c(o)){s.show(r.getText("errorProductName"));return}if(!g(u)){s.show(r.getText("errorReorderLevel"));return}if(!g(i)){s.show(r.getText("errorUnitsInStock"));return}if(!g(d)){s.show(r.getText("errorUnitsOnOrder"));return}if(!l(a)){s.show(r.getText("errorUnitPrice"));return}t.setProperty("productName",o);t.setProperty("quantityPerUnit",n);t.setProperty("unitPrice",parseFloat(a).toFixed(2));t.setProperty("unitsInStock",parseInt(i,10));t.setProperty("reorderLevel",parseInt(u,10));t.setProperty("unitsOnOrder",parseInt(d,10));e.getModel("oProductEnableModel").setProperty("/isProductsDataEditable",false);e.getModel().submitBatch("updateGroup").then(function(){s.show(r.getText("successMessage"));this.getView().getModel().refresh(true)}).catch(function(e){t.getModel().resetChanges("updateGroup");var o=e.message||r.getText("defaultErrorMessage");if(e.responseJSON&&e.responseJSON.error){o=e.responseJSON.error.message}console.error("Error while saving data:",e);s.show(o)})}})});
//# sourceMappingURL=details.controller.js.map